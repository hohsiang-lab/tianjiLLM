// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: mcp.sql

package db

import (
	"context"
)

const createMCPServer = `-- name: CreateMCPServer :one
INSERT INTO "MCPServerTable" (server_id, alias, transport, url, command, args, auth_type, auth_token, static_headers, allowed_tools, disallowed_tools)
VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11)
RETURNING id, server_id, alias, transport, url, command, args, auth_type, auth_token, static_headers, allowed_tools, disallowed_tools, created_at, updated_at
`

type CreateMCPServerParams struct {
	ServerID        string   `json:"server_id"`
	Alias           string   `json:"alias"`
	Transport       string   `json:"transport"`
	Url             string   `json:"url"`
	Command         string   `json:"command"`
	Args            []string `json:"args"`
	AuthType        string   `json:"auth_type"`
	AuthToken       string   `json:"auth_token"`
	StaticHeaders   []byte   `json:"static_headers"`
	AllowedTools    []string `json:"allowed_tools"`
	DisallowedTools []string `json:"disallowed_tools"`
}

func (q *Queries) CreateMCPServer(ctx context.Context, arg CreateMCPServerParams) (MCPServerTable, error) {
	row := q.db.QueryRow(ctx, createMCPServer,
		arg.ServerID,
		arg.Alias,
		arg.Transport,
		arg.Url,
		arg.Command,
		arg.Args,
		arg.AuthType,
		arg.AuthToken,
		arg.StaticHeaders,
		arg.AllowedTools,
		arg.DisallowedTools,
	)
	var i MCPServerTable
	err := row.Scan(
		&i.ID,
		&i.ServerID,
		&i.Alias,
		&i.Transport,
		&i.Url,
		&i.Command,
		&i.Args,
		&i.AuthType,
		&i.AuthToken,
		&i.StaticHeaders,
		&i.AllowedTools,
		&i.DisallowedTools,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const deleteMCPServer = `-- name: DeleteMCPServer :exec
DELETE FROM "MCPServerTable" WHERE id = $1
`

func (q *Queries) DeleteMCPServer(ctx context.Context, id string) error {
	_, err := q.db.Exec(ctx, deleteMCPServer, id)
	return err
}

const getMCPServer = `-- name: GetMCPServer :one
SELECT id, server_id, alias, transport, url, command, args, auth_type, auth_token, static_headers, allowed_tools, disallowed_tools, created_at, updated_at FROM "MCPServerTable" WHERE id = $1
`

func (q *Queries) GetMCPServer(ctx context.Context, id string) (MCPServerTable, error) {
	row := q.db.QueryRow(ctx, getMCPServer, id)
	var i MCPServerTable
	err := row.Scan(
		&i.ID,
		&i.ServerID,
		&i.Alias,
		&i.Transport,
		&i.Url,
		&i.Command,
		&i.Args,
		&i.AuthType,
		&i.AuthToken,
		&i.StaticHeaders,
		&i.AllowedTools,
		&i.DisallowedTools,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const getMCPServerByServerID = `-- name: GetMCPServerByServerID :one
SELECT id, server_id, alias, transport, url, command, args, auth_type, auth_token, static_headers, allowed_tools, disallowed_tools, created_at, updated_at FROM "MCPServerTable" WHERE server_id = $1
`

func (q *Queries) GetMCPServerByServerID(ctx context.Context, serverID string) (MCPServerTable, error) {
	row := q.db.QueryRow(ctx, getMCPServerByServerID, serverID)
	var i MCPServerTable
	err := row.Scan(
		&i.ID,
		&i.ServerID,
		&i.Alias,
		&i.Transport,
		&i.Url,
		&i.Command,
		&i.Args,
		&i.AuthType,
		&i.AuthToken,
		&i.StaticHeaders,
		&i.AllowedTools,
		&i.DisallowedTools,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const listMCPServers = `-- name: ListMCPServers :many
SELECT id, server_id, alias, transport, url, command, args, auth_type, auth_token, static_headers, allowed_tools, disallowed_tools, created_at, updated_at FROM "MCPServerTable" ORDER BY server_id ASC
`

func (q *Queries) ListMCPServers(ctx context.Context) ([]MCPServerTable, error) {
	rows, err := q.db.Query(ctx, listMCPServers)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []MCPServerTable
	for rows.Next() {
		var i MCPServerTable
		if err := rows.Scan(
			&i.ID,
			&i.ServerID,
			&i.Alias,
			&i.Transport,
			&i.Url,
			&i.Command,
			&i.Args,
			&i.AuthType,
			&i.AuthToken,
			&i.StaticHeaders,
			&i.AllowedTools,
			&i.DisallowedTools,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const updateMCPServer = `-- name: UpdateMCPServer :one
UPDATE "MCPServerTable"
SET alias = COALESCE($2, alias),
    transport = COALESCE($3, transport),
    url = COALESCE($4, url),
    command = COALESCE($5, command),
    args = COALESCE($6, args),
    auth_type = COALESCE($7, auth_type),
    auth_token = COALESCE($8, auth_token),
    static_headers = COALESCE($9, static_headers),
    allowed_tools = COALESCE($10, allowed_tools),
    disallowed_tools = COALESCE($11, disallowed_tools),
    updated_at = NOW()
WHERE id = $1
RETURNING id, server_id, alias, transport, url, command, args, auth_type, auth_token, static_headers, allowed_tools, disallowed_tools, created_at, updated_at
`

type UpdateMCPServerParams struct {
	ID              string   `json:"id"`
	Alias           string   `json:"alias"`
	Transport       string   `json:"transport"`
	Url             string   `json:"url"`
	Command         string   `json:"command"`
	Args            []string `json:"args"`
	AuthType        string   `json:"auth_type"`
	AuthToken       string   `json:"auth_token"`
	StaticHeaders   []byte   `json:"static_headers"`
	AllowedTools    []string `json:"allowed_tools"`
	DisallowedTools []string `json:"disallowed_tools"`
}

func (q *Queries) UpdateMCPServer(ctx context.Context, arg UpdateMCPServerParams) (MCPServerTable, error) {
	row := q.db.QueryRow(ctx, updateMCPServer,
		arg.ID,
		arg.Alias,
		arg.Transport,
		arg.Url,
		arg.Command,
		arg.Args,
		arg.AuthType,
		arg.AuthToken,
		arg.StaticHeaders,
		arg.AllowedTools,
		arg.DisallowedTools,
	)
	var i MCPServerTable
	err := row.Scan(
		&i.ID,
		&i.ServerID,
		&i.Alias,
		&i.Transport,
		&i.Url,
		&i.Command,
		&i.Args,
		&i.AuthType,
		&i.AuthToken,
		&i.StaticHeaders,
		&i.AllowedTools,
		&i.DisallowedTools,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}
